<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Project 1 — Histogram & Filtering | CS180</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="brand">
        <a class="back" href="../">&larr; Home</a>
        <h1>Project 1 — Histogram and Filtering</h1>
        <p class="byline">Compton Ross</p>
      </div>
      <nav class="toc">
        <a href="#part1">Part 1</a>
        <a href="#part2a">2(a)</a>
        <a href="#part2b">2(b)</a>
        <a href="#part2c">2(c)</a>
        <a href="#part2d">2(d)</a>
        <a href="#part2e">2(e)</a>
        <a href="#part3-q1">3 — Q1</a>
        <a href="#part3-q2">3 — Q2</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- ===================== Part 1 ===================== -->
    <section id="part1">
      <h2>Part 1 — Perspective vs. Approx. Orthographic</h2>
      <div class="grid">
        <figure class="card">
          <img src="./media/part1/p1_perspective.png" alt="Perspective projection">
          <figcaption>Perspective projection</figcaption>
        </figure>
        <figure class="card">
          <img src="./media/part1/p1_orthographic.png" alt="Approx orthographic (zoom/crop)">
          <figcaption>Approx. orthographic (zoom/crop)</figcaption>
        </figure>
      </div>
      <p class="discussion">
        The perspective image looks much more angled when compared to the orthographic image. The back of the TV stand appears to be much further away and much smaller. Additionally, the red lines that I have drawn on the images seem to confirm that lines from the perspective image will converge much more quickly than the orthographic, as they are at a steeper angle.
      </p>
    </section>

    <!-- ===================== Part 2(a) ===================== -->
    <section id="part2a">
      <h2>Part 2(a) — Histogram Equalization (Provided Images)</h2>

      <!-- Image 1 -->
      <div class="grid four">
        <figure class="card"><img src="./media/part2a_outputs/img1_orig.png" alt=""><figcaption>Img1 Original</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img1_orig_hist.png" alt=""><figcaption>Img1 Orig. Hist</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img1_eq.png" alt=""><figcaption>Img1 Equalized</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img1_eq_hist.png" alt=""><figcaption>Img1 Eq. Hist</figcaption></figure>
      </div>

      <!-- Image 2 -->
      <div class="grid four">
        <figure class="card"><img src="./media/part2a_outputs/img2_orig.png" alt=""><figcaption>Img2 Original</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img2_orig_hist.png" alt=""><figcaption>Img2 Orig. Hist</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img2_eq.png" alt=""><figcaption>Img2 Equalized</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img2_eq_hist.png" alt=""><figcaption>Img2 Eq. Hist</figcaption></figure>
      </div>

      <!-- Image 3 -->
      <div class="grid four">
        <figure class="card"><img src="./media/part2a_outputs/img3_orig.png" alt=""><figcaption>Img3 Original</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img3_orig_hist.png" alt=""><figcaption>Img3 Orig. Hist</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img3_eq.png" alt=""><figcaption>Img3 Equalized</figcaption></figure>
        <figure class="card"><img src="./media/part2a_outputs/img3_eq_hist.png" alt=""><figcaption>Img3 Eq. Hist</figcaption></figure>
      </div>

      <!-- Optional: add a short summary here if you want -->
      <!-- <p class="discussion">Brief summary of equalization results for the three images.</p> -->
    </section>

    <!-- ===================== Part 2(b) ===================== -->
    <section id="part2b">
      <h2>Part 2(b) — Equalization on My Photo</h2>
      <div class="grid four">
        <figure class="card"><img src="./media/part2b_outputs/bbq_orig.png" alt=""><figcaption>Original</figcaption></figure>
        <figure class="card"><img src="./media/part2b_outputs/bbq_orig_hist.png" alt=""><figcaption>Original Hist</figcaption></figure>
        <figure class="card"><img src="./media/part2b_outputs/bbq_eq.png" alt=""><figcaption>Equalized</figcaption></figure>
        <figure class="card"><img src="./media/part2b_outputs/bbq_eq_hist.png" alt=""><figcaption>Eq. Hist</figcaption></figure>
      </div>
      <p class="discussion">
        While working on this section I originally had a hard time finding an image with poor contrast (as most times I would end up deleting those pictures). The picture I used was from a small barbecue I had with a few friends where some of the shadows in the picture appeared to be off. 
        Comparing the histograms, the original seemed to have a small tail at each end, whereas the histogram after equalization seemed to be somewhat more level. In terms of how this affected the quality of the picture, it seems to have made the shadowed areas darker. Although the image may not have had a super terrible contrast to begin with, it appeared to improve it to a small extent.
      </p>
    </section>

    <!-- ===================== Part 2(c) ===================== -->
    <section id="part2c">
      <h2>Part 2(c) — Histogram Matching</h2>
      <div class="grid four">
        <figure class="card"><img src="./media/part2c_outputs/target.png" alt=""><figcaption>Target</figcaption></figure>
        <figure class="card"><img src="./media/part2c_outputs/target_hist.png" alt=""><figcaption>Target Hist</figcaption></figure>
        <figure class="card"><img src="./media/part2c_outputs/src1_matched.png" alt=""><figcaption>Src1 Matched</figcaption></figure>
        <figure class="card"><img src="./media/part2c_outputs/src1_matched_hist.png" alt=""><figcaption>Src1 Matched Hist</figcaption></figure>
      </div>
      <!-- Optional: add a short summary for matching -->
      <!-- <p class="discussion">Brief note on how matching mapped source quantiles to target CDF and the visual effect.</p> -->
    </section>

    <!-- ===================== Part 2(d) ===================== -->
    <section id="part2d">
      <h2>Part 2(d) — DoG vs Gaussian→Derivative</h2>
      <p class="note">Both paths use the same operator; derivatives shown with symmetric rescale for ± visibility.</p>
      <div class="grid four">
        <figure class="card"><img src="./media/part2d_outputs/img1_Ix_naive.png" alt=""><figcaption>Img1 Ix (Naive)</figcaption></figure>
        <figure class="card"><img src="./media/part2d_outputs/img1_Ix_dog.png" alt=""><figcaption>Img1 Ix (DoG)</figcaption></figure>
        <figure class="card"><img src="./media/part2d_outputs/img1_Iy_naive.png" alt=""><figcaption>Img1 Iy (Naive)</figcaption></figure>
        <figure class="card"><img src="./media/part2d_outputs/img1_Iy_dog.png" alt=""><figcaption>Img1 Iy (DoG)</figcaption></figure>
      </div>
      <p class="discussion">
        Comparing the results of the naive two-step method and the direct derivative method shows that the outputs seemed to be extremely similar. Both approaches appear to highlight the same edges, confirming that they are mathematically equivalent. 
        A small difference between the two seems to be that the edges from the DoG appear to be inverted when compared to the naive method. I don’t think this is caused from the mathematics, but is instead a result of the kernel in convolution and cross correlation being inverses of each other (essentially flipping the images). In a future implementation, I would handle this in the code so that they would appear completely identical in the output.
      </p>
    </section>

    <!-- ===================== Part 2(e) ===================== -->
    <section id="part2e">
      <h2>Part 2(e) — Unsharp Masking</h2>
      <div class="grid four">
        <figure class="card"><img src="./media/part2e_outputs/ct_orig.png" alt=""><figcaption>CT — Original</figcaption></figure>
        <figure class="card"><img src="./media/part2e_outputs/ct_sharp_sigma1p3_alpha2.png" alt=""><figcaption>CT — Sharp (σ=1.3, α=2)</figcaption></figure>
        <figure class="card"><img src="./media/part2e_outputs/moon_orig.png" alt=""><figcaption>Moon — Original</figcaption></figure>
        <figure class="card"><img src="./media/part2e_outputs/moon_sharp_sigma1p3_alpha4.png" alt=""><figcaption>Moon — Sharp (σ=1.3, α=4)</figcaption></figure>
      </div>
      <p class="discussion">
        With a small alpha, the sharpening effect is very subtle as only a fraction of the high-frequency details that are extracted are added back. As this alpha increases, edges become more pronounced, causing the resulting image to be much sharper. However if alpha becomes too large, it can cause edges in the pictures to become too sharp or overly detailed as seen in the final test with the moon image.
      </p>
    </section>

    <!-- ===================== Part 3 — Q1 ===================== -->
    <section id="part3-q1">
      <h2>Part 3 — Question 1: PM Implementation & Parameter Study</h2>

      <h3>Exponential Conductance</h3>
      <div class="grid four">
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_exp_k0p05_i5.png" alt=""><figcaption>Img1 Exp K=0.05, 5 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_exp_k0p1_i15.png" alt=""><figcaption>Img1 Exp K=0.1, 15 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_exp_k0p2_i30.png" alt=""><figcaption>Img1 Exp K=0.2, 30 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img2_exp_k0p1_i15.png" alt=""><figcaption>Img2 Exp K=0.1, 15 iters</figcaption></figure>
      </div>

      <h3>Reciprocal Conductance</h3>
      <div class="grid four">
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_recip_k0p05_i5.png" alt=""><figcaption>Img1 Recip K=0.05, 5 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_recip_k0p1_i15.png" alt=""><figcaption>Img1 Recip K=0.1, 15 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img1_recip_k0p2_i30.png" alt=""><figcaption>Img1 Recip K=0.2, 30 iters</figcaption></figure>
        <figure class="card"><img src="./media/part3a_outputs/p3_img2_recip_k0p2_i30.png" alt=""><figcaption>Img2 Recip K=0.2, 30 iters</figcaption></figure>
      </div>

      <p class="discussion">
        Smaller K makes the conductance drop much quicker near edges, so diffusion stops at boundaries and denoises mainly inside regions. Larger K on the other hand behave more similarly to isotropic blur and softens edges.
        As you increase the number of iterations, flat areas will get progressively more smooth. However it is possible to have too much iterations, resulting in a cartoonish like smooth texture. 
      </p>
    </section>

    <!-- ===================== Part 3 — Q2 ===================== -->
    <section id="part3-q2">
      <h2>Part 3 — Question 2: Comparison with Gaussian</h2>
      <div class="grid three">
        <figure class="card"><img src="./media/part3b_outputs/p3_img1_pm_exp_k0p1_i15.png" alt=""><figcaption>Img1 PM Exp (K=0.1, 15 iters)</figcaption></figure>
        <figure class="card"><img src="./media/part3b_outputs/p3_img1_pm_recip_k0p2_i30.png" alt=""><figcaption>Img1 PM Recip (K=0.2, 30 iters)</figcaption></figure>
        <figure class="card"><img src="./media/part3b_outputs/p3_img1_gauss_sigma1p2.png" alt=""><figcaption>Img1 Gaussian σ=1.2</figcaption></figure>
      </div>
      <p class="discussion">
        Although gaussian smoothing has a similar overall noise reduction, it blurs the images uniformly. Boundaries and thin structures may overly soften and begin to blend into the surroundings. This is what Anisotropic diffusion does better, as it denoises within set regions so that sharp edges in the image are still conserved.
      </p>
    </section>
  </main>

  <footer class="site-footer">
    <p>© <span id="year"></span> Compton Ross</p>
  </footer>

  <!-- Modal for image zoom -->
  <div id="imgModal" class="modal">
    <span id="modalClose" class="close">&times;</span>
    <img class="modal-content" id="modalImg" alt="">
    <div id="caption"></div>
  </div>

  <script>
    const modal = document.getElementById("imgModal");
    const modalImg = document.getElementById("modalImg");
    const captionText = document.getElementById("caption");
    const closeBtn = document.getElementById("modalClose");

    document.querySelectorAll("section img").forEach(img => {
      img.style.cursor = "zoom-in";
      img.addEventListener("click", () => {
        modal.style.display = "block";
        modalImg.src = img.src;
        captionText.textContent = img.nextElementSibling ? img.nextElementSibling.innerText : "";
      });
    });

    closeBtn.addEventListener("click", () => { modal.style.display = "none"; });
    modal.addEventListener("click", (e) => { if (e.target === modal) modal.style.display = "none"; });
  </script>

</body>
</html>
